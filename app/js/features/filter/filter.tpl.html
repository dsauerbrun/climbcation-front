<section class="filter visible-xs" track-scroll="50" ng-class="{'full-screen': mapFilterShown || filtersShown}">
	<div class="row filter-banner">
		<div class="col-xs-3" ng-if="!mapFilterShown && !filtersShown" ng-click="toggleFilters()">
			<div class="btn btn-climbcation">
				Filter
			</div>
		</div>
		<div class="col-xs-offset-3 col-xs-3" ng-if="!mapFilterShown && !filtersShown" ng-click="toggleMapFilter()">
			<div class="btn btn-climbcation">
				Open Map Filter
			</div>
		</div>
		<div class="col-xs-3" ng-if="filtersShown" ng-click="toggleFilters()">
			<div class="btn btn-climbcation">
				Close Filters
			</div>
		</div>
		<div class="col-xs-offset-3 col-xs-3" ng-if="filtersShown" ng-click="clearFilters()">
			<div class="btn btn-climbcation">
				Clear Filters
			</div>
		</div>
		<div class="col-xs-offset-6 col-xs-3" ng-if="mapFilterShown" ng-click="toggleMapFilter()">
			<div class="btn btn-climbcation">
				Close Map Filter
			</div>
		</div>
	</div>
	<div ng-show="filtersShown">		
		<div class="col-md-9">
			<div class="row col-md-offset-4">
				<h4 class="text-center">
					Select the relevant criteria to find your perfect climbing trip
				</h4>
			</div>
			<div class="row bottom-padding">
				<div class="col-md-5">
					<label>Your Local Airport<span class="gray">(get flight prices!)</span></label>
					<div class="airport-wrapper">
						<input class="form-control" type="text" ng-model="helperService.originAirport" ng-trim="true"
						ng-click="clearPristine()"
						typeahead-min-length="3" 
						typeahead-wait-ms="500" uib-typeahead="airport.name for airport in helperService.getAirports($viewValue)"
						typeahead-popup-template-url="views/airport_autocomplete.tpl.html"
						typeahead-on-select="selectAirport($item, $model, $label, $event)"/>
						<div class="loading-airports" ng-if="helperService.loadingAirports">
							<img src="/images/climbcation-loading.gif" />
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<label>Keyword Search</label>
					<input type="text" class="form-control" ng-model="LocationsGetter.filter.search" ng-trim="true" ng-change="LocationsGetter.filterByQuery(LocationsGetter.filter.search)" ng-model-options="{ debounce: 500 }" placeholder="ex. beach"/>
				</div>
				<div class="col-md-3">
					<label>Time</label>
					<span class="dropdown">
					  <button class="btn btn-default dropdown-toggle" type="button" id="startMonth" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
					    {{LocationsGetter.filter.start_month_name | limitTo: 3}}
					    <span class="caret"></span>
					  </button>
					  <ul class="dropdown-menu" aria-labelledby="startMonth">
					    <li><a ng-click="LocationsGetter.filterByMonth(1, LocationsGetter.filter.end_month)">January</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(2, LocationsGetter.filter.end_month)">February</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(3, LocationsGetter.filter.end_month)">March</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(4, LocationsGetter.filter.end_month)">April</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(5, LocationsGetter.filter.end_month)">May</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(6, LocationsGetter.filter.end_month)">June</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(7, LocationsGetter.filter.end_month)">July</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(8, LocationsGetter.filter.end_month)">August</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(9, LocationsGetter.filter.end_month)">September</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(10, LocationsGetter.filter.end_month)">October</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(11, LocationsGetter.filter.end_month)">November</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(12, LocationsGetter.filter.end_month)">December</a></li>
					  </ul>
					</span>
					<span class="text-gray">To </span>
					<span class="dropdown">
					  <button class="btn btn-default dropdown-toggle" type="button" id="endMonth" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" ng-click="LocationsGetter.cancelFilterTimer()">
					    {{LocationsGetter.filter.end_month_name | limitTo: 3}}
					    <span class="caret"></span>
					  </button>
					  <ul class="dropdown-menu" aria-labelledby="endMonth">
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 1)">January</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 2)">February</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 3)">March</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 4)">April</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 5)">May</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 6)">June</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 7)">July</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 8)">August</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 9)">September</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 10)">October</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 11)">November</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 12)">December</a></li>
					  </ul>
					</span>
				</div>
			</div>
			<div class="row">
				<div class="col-md-5">
					<label>Climbing Type</label>
					<div class="btn-group btn-group-sm btn-group-filter" data="climbing_types" role="group">
						<button ng-click="LocationsGetter.toggleFilterButton('climbing_types','All' )" type="button" class="filter-button btn btn-lg btn-default all" ng-class="{'active': LocationsGetter.isButtonActive('climbing_types', 'empty')}">All</button>
						<button ng-click="LocationsGetter.toggleFilterButton('climbing_types',name )" ng-repeat="(name,climbType) in filter.climbTypes" type="button" class="filter-button btn btn-lg btn-default" ng-class="{'active': LocationsGetter.isButtonActive('climbing_types', name)}" data="{{ name }}">{{name}}</button>
					</div>
				</div>
				<div class="col-md-3">
					<label>What is the hardest grade you're looking for?</label>
					<div class="btn-group grade-filter-button" ng-repeat="type in filter.grades">
						<button type="button" class="filter-button btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{gradeFilter[type.type.id].grade || type.type.name}} <span class="caret"></span></button>
						<ul class="dropdown-menu" style="max-height: 130px; overflow-y: scroll">
					    <li ng-click="setGradeFilter(type.type, 'all')"><a>All {{type.type.name}} Grades</a></li>
					    <li ng-repeat="grade in type.grades" ng-click="setGradeFilter(type.type, grade)"><a>{{grade.grade}}</a></li>
					  </ul>
					</div>
				</div>
				<div class="col-md-6">
					<label>Rating</label>
					<div class="btn-group btn-group-sm btn-group-filter" data="climbing_types" role="group">
						<button ng-click="LocationsGetter.toggleFilterButton('rating', 'All')" type="button" class="filter-button btn btn-lg btn-default all" ng-class="{'active': LocationsGetter.isButtonActive('rating', 'empty')}">All</button>
						<button ng-click="LocationsGetter.toggleFilterButton('rating', ratingNumber)" ng-repeat="ratingNumber in [1,2,3]" type="button" class="filter-button btn btn-lg btn-default" ng-class="{'active': LocationsGetter.isButtonActive('rating', ratingNumber)}" data="{{ ratingNumber }}">
							<span class="glyphicon glyphicon-star"></span>
						</button>
					</div>
				</div>
				<div class="col-md-4">
					<label>Solo Friendly</label>
					<label class="control control--checkbox" for="soloFriendlyEnabled" ng-class="{'active': LocationsGetter.filter.solo_friendly}">
						<input type="checkbox" name="soloFriendlyEnabled" id="soloFriendlyEnabled" ng-model="LocationsGetter.filter.solo_friendly" ng-change="LocationsGetter.setFilterTimer(1)">
						<div class="control__indicator"></div>
					</label>
				</div>
			</div>
			<div class="row">

			</div>
		</div>
	</div>
	<div ng-show="mapFilterShown">
		<map-filter class="row" filter-type="mobile" ng-if="mobile && !filterMapDisabled">
		</map-filter>
	</div>
</section>


<section class="filter hidden-xs">
	<div class="container-fluid">		
		<div class="col-md-9">
			<div class="row">
				<div class="row col-md-offset-4 col-md-8">
					<h4 class="text-center">
						Select the relevant criteria to find your perfect climbing trip
					</h4>
					<h5 class="text-center">
						<strong>(results will update automatically based on your selection)</strong>
					</h5>
				</div>
			</div>
			<div class="row bottom-padding">
				<div class="col-md-5">
					<label>What do you want to climb?</label>
					<div class="btn-group btn-group-sm btn-group-filter" data="climbing_types" role="group">
						<button ng-click="LocationsGetter.toggleFilterButton('climbing_types','All' )" type="button" class="filter-button btn btn-lg btn-default all" ng-class="{'active': LocationsGetter.isButtonActive('climbing_types', 'empty')}">All</button>
						<button ng-click="LocationsGetter.toggleFilterButton('climbing_types',name )" ng-repeat="(name,climbType) in filter.climbTypes" type="button" class="filter-button btn btn-lg btn-default" ng-class="{'active': LocationsGetter.isButtonActive('climbing_types', name)}" data="{{ name }}">{{name}}</button>
					</div>
				</div>
				<div class="col-md-4">
					<label>Your Local Airport<span class="gray">(get flight prices!)</span></label>
					<div class="airport-wrapper">
						<input class="form-control" type="text" ng-model="helperService.originAirport" ng-click="clearPristine()" ng-trim="true" typeahead-min-length="3" 
						typeahead-wait-ms="100" uib-typeahead="airport.name for airport in helperService.getAirports($viewValue)"
						typeahead-popup-template-url="views/airport_autocomplete.tpl.html"
						typeahead-on-select="selectAirport($item, $model, $label, $event)" />
						<div class="loading-airports" ng-if="helperService.loadingAirports">
							<img src="/images/climbcation-loading.gif" />
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<label>When do you want to go?</label>
					<span class="dropdown">
					  <button class="btn btn-default dropdown-toggle" type="button" id="startMonth" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
					    {{LocationsGetter.filter.start_month_name | limitTo: 3}}
					    <span class="caret"></span>
					  </button>
					  <ul class="dropdown-menu" aria-labelledby="startMonth">
					    <li><a ng-click="LocationsGetter.filterByMonth(1, LocationsGetter.filter.end_month)">January</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(2, LocationsGetter.filter.end_month)">February</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(3, LocationsGetter.filter.end_month)">March</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(4, LocationsGetter.filter.end_month)">April</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(5, LocationsGetter.filter.end_month)">May</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(6, LocationsGetter.filter.end_month)">June</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(7, LocationsGetter.filter.end_month)">July</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(8, LocationsGetter.filter.end_month)">August</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(9, LocationsGetter.filter.end_month)">September</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(10, LocationsGetter.filter.end_month)">October</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(11, LocationsGetter.filter.end_month)">November</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(12, LocationsGetter.filter.end_month)">December</a></li>
					  </ul>
					</span>
					<span class="text-gray">To </span>
					<span class="dropdown">
					  <button class="btn btn-default dropdown-toggle" type="button" id="endMonth" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" ng-click="LocationsGetter.cancelFilterTimer()">
					    {{LocationsGetter.filter.end_month_name | limitTo: 3}}
					    <span class="caret"></span>
					  </button>
					  <ul class="dropdown-menu" aria-labelledby="endMonth">
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 1)">January</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 2)">February</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 3)">March</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 4)">April</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 5)">May</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 6)">June</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 7)">July</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 8)">August</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 9)">September</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 10)">October</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 11)">November</a></li>
					    <li><a ng-click="LocationsGetter.filterByMonth(LocationsGetter.filter.start_month, 12)">December</a></li>
					  </ul>
					</span>
				</div>
			</div>
			<div class="row">
				<div class="col-md-5">
					<label>What is the hardest grade you're looking for?</label>
					<div class="btn-group grade-filter-button" ng-repeat="type in filter.grades">
						<button type="button" class="filter-button btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{getSelectedGrade(type) || type.type.name}} <span class="caret"></span></button>
						<ul class="dropdown-menu">
					    <li ng-click="setGradeFilter(type.type, 'all')"><a>All {{type.type.name}} Grades</a></li>
					    <li ng-repeat="grade in type.grades" ng-click="setGradeFilter(type.type, grade)"><a>{{grade.grade}}</a></li>
					  </ul>
					</div>
				</div>
				<div class="col-md-4">
					<label>Keyword Search</label>
					<input type="text" class="form-control" ng-model="LocationsGetter.filter.search" ng-trim="true" ng-change="LocationsGetter.filterByQuery(LocationsGetter.filter.search)" ng-model-options="{ debounce: 500 }" placeholder="ex. beach"/>
				</div>
				<div class="col-md-3">
					<div class="small-toggles-flex">
						<div>
							<label>Solo Friendly</label>
							<label class="control control--checkbox" for="soloFriendlyEnabled" ng-class="{'active': LocationsGetter.filter.solo_friendly}">
								<input type="checkbox" name="soloFriendlyEnabled" id="soloFriendlyEnabled" ng-model="LocationsGetter.filter.solo_friendly" ng-change="LocationsGetter.setFilterTimer(1)">
								<div class="control__indicator"></div>
							</label>
						</div>
						<div>
							<label>Rating</label>
							<div class="btn-group btn-group-sm btn-group-filter" data="climbing_types" role="group">
								<button ng-click="LocationsGetter.toggleFilterButton('rating', 'All')" type="button" class="filter-button btn btn-lg btn-default all" ng-class="{'active': LocationsGetter.isButtonActive('rating', 'empty')}">All</button>
								<button ng-click="LocationsGetter.toggleFilterButton('rating', ratingNumber)" ng-repeat="ratingNumber in [1,2,3]" type="button" class="filter-button btn btn-lg btn-default" ng-class="{'active': LocationsGetter.isButtonActive('rating', ratingNumber)}" data="{{ ratingNumber }}">
									<span class="glyphicon glyphicon-star" data-template-url="views/tooltips/startooltip.tpl.html" data-animation="am-flip-x" bs-tooltip="helperService.getRatingName(ratingNumber)"></span>
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-3" ng-if="!filterMapDisabled">
			<map-filter ng-if="!mobile" filter-type="small">
			</map-filter>
			
			</div>
		</div>
	</div>
</section>
